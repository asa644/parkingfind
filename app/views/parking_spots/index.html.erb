<div class="container-fluid">
  <div class='form-group form-inline text-center'>
    <label for='search'><label>
    <input id="search_box" type='text' name='search' class='form-control' placeholder= 'Where to park?'>
    <input class="btn btn-success" type='submit' value='Search' >
  </div>
  <div class="row">
    <div class="col-xs-12 col-lg-4">
      <div class="container">
        <% if @parking_spots.blank? %>
          <h3>Nous avons pas de parking</h3>
          <h4>A cette endroit</h4>
        <% else %>
          <% @parking_spots.each do |parking_spot| %>
            <div class="row">
              <div class="col-xs-6 col-lg-2">
                <h6><strong>Address:</strong> <%= parking_spot.street_address %></h6>
                <h6><strong>City:</strong> <%= parking_spot.city %></h6>
                <h6><strong>Country:</strong> <%= parking_spot.country %></h6>
                <%= link_to 'Book now!',  new_parking_spot_booking_path(parking_spot), style: "color:green" %>
              </div>
              <div class="col-xs-6 col-lg-2">
                <%= cl_image_tag parking_spot.photo, height: 90, width: 90, crop: :fill, style: "position:relative;left:33px;top: 12px;" %>
              </div>
            </div>
          <% end %>
        <% end %>
        <div class="digg_pagination">
         <%= will_paginate @parking_spots %>
        </div>
      </div>
    </div>

    <div class="col-xs-12 col-lg-8" id="smappux" style="padding-bottom: 30px;">
      <div id="map" class="map_structure" style="width: 100%;height: 500px;position: fixed !important;"></div>
    </div>
  </div>
</div>

<%= javascript_include_tag "https://maps.google.com/maps/api/js?key=AIzaSyBAbVBfyj-wKN5_BQGC7LsP8hjV2GuH_WE" %>
<%= javascript_include_tag "https://cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/markerclusterer/src/markerclusterer_compiled.js" %>
<%= javascript_include_tag "https://cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js" %>

<% content_for(:after_js) do %>
  <%= javascript_tag do %>
      var handler = Gmaps.build('Google');
      handler.buildMap({ internal: { id: 'map' } }, function() {
        markers = handler.addMarkers(<%= raw @hash.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
          if (markers.length == 0) {
            handler.getMap().setZoom(2);
          }
          else if (markers.length == 1) {
            handler.getMap().setZoom(14);
          }
      });
  <% end %>
<% end %>




