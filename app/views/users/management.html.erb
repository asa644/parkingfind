<div class="container owner_dashboard">
  <div class="row text-center">
    <div class="col-xs-6">
      <h3> Total of bookings days </h3>
        <% array_of_days = @user.parking_spots.map do |p| %>
        <% p.bookings.sum(:number_of_days) %>
        <% end %>
      <p> <%= array_of_days.inject(:+) %> </p>
    </div>
    <div class="col-xs-6">
      <h3> Cash earned </h3>
      <% array_of_price = @user.parking_spots.map do |p| %>
        <% p.bookings.sum(:total_price) %>
      <% end %>
      <p> <%= array_of_price.inject(:+) %> </p>
    </div>
    <div class="col-xs-6">
      <h3> Number of parking spots </h3>
      <p> <%= @user.parking_spots.count %> </p>
    </div>
      <div class="col-xs-6">
        <h3> Number of transactions </h3>
        <% array_of_transaction = @user.parking_spots.map do |p| %>
         <% p.bookings.count %>
        <% end %>
        <p> <%= array_of_transaction.inject(:+) %> </p>

    </div>
  </div>

  <div class="row">
    <div class="col-xs-12 management-spot">
      <% if @parking_spots.empty? %>
        <h2> You don't have any parkaing spots yet ! </h2>
      <% else %>
        <% @parking_spots.each do |parking_spot| %>
          <hr>
          <p> <strong> Adress: </strong> : <%= parking_spot.street_address %> </p>
          <p> <strong> Price: </strong> <%= parking_spot.price %> </p>
          <p> <strong> Total Number of booking: </strong><%= parking_spot.bookings.count %> </p>
          <p> <strong> Total Cash earned </strong><%= parking_spot.bookings.sum(:total_price) %> </p>
          <p> <strong> Total days booked </strong> <%= parking_spot.bookings.sum(:number_of_days) %> </p>
          <p> <strong> ID: </strong> <%= parking_spot.id %> </p>
          <p> <%= link_to "Edit", edit_parking_spot_path(parking_spot), class: "btn btn-danger" %></p>
          <p> <%= link_to 'Details', parking_spot_path(parking_spot), class:"btn btn-success" %> </p>
          <p> <%= link_to "Delete Parking", parking_spot_path(parking_spot), { class: "btn btn-danger", method: :delete }  %></p>
        <% end %>
      <% end %>
    </div>
  </div>
    <div class="digg_pagination">
      <%= will_paginate @segment %>
    </div>
</div>
