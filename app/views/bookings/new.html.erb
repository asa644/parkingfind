    <div class="container-fluid text-center">
      <div class="row">
        <div class="col-lg-12 bg-grey">
          <div id="map" style="width: 100%; height: 300px;"></div>
        </div>
      </div>
    </div>
    <div class="container-fluid text-center">
      <div class="row ">
        <div class="col-lg-6 bg-grey booking-form-info">
            <h2 id="bookingtitle"><strong><%= @parking_spot.street_address %></strong></h2>
            <% @parking_spot.user_id %>
              <h3> <strong>Address:</strong> <%= @parking_spot.street_address %></h3>
              <h3> <strong>Description:</strong> <%= @parking_spot.description %></h3>
              <h3><strong>City:</strong> <%= @parking_spot.city %></h3>
              <h3><strong>Country:</strong> <%= @parking_spot.country %></h3>
              <h3><strong>Number of spots:</strong> <%= @parking_spot.number_of_spots %></h3>
        </div>
        <div class="col-lg-3 bg-navy booking-form-book">
          <h2><strong>Total Price: </strong>$<span id='total-price'><%= @parking_spot.price %></span></h2>
          <p><strong>Price: </strong><%= @parking_spot.price %> /day</p>
          <%= simple_form_for [@parking_spot, @booking] do |f| %>
            <%= f.input :start_at, as: :string, input_html: { class: 'datepicker', id: "dp_start_at" } %>
            <%= f.input :end_at, as: :string, input_html: { class: 'datepicker', id: "dp_end_at" } %>
            <%= button_tag(type: 'submit', class: "btn-block btn-warning") do %>
              <i class="icon-ok icon-white"></i> Make a Request
            <% end %>
          <% end %>
          <% if current_user.customer_id == nil %>
            <p> Your credit card won't be charged </p>
          <% else %>
            <p> </p>
        <% end %>
      </div>
      <div class="col-lg-3 bg-grey booking-form-info">
        <br>
        <p><strong>Got a spare driveway or garage in Lebanon ?</strong> You can list your parking space for free with Parkingfind. It only takes a few minutes to get up and running, and you could be making money in no time. Find out more here.</p>
        <br>
        <%= link_to "Rent your space", new_parking_spot_path, class: "btn btn-info" %>
        <br>
        <br>
      </div>
    </div>
  </div>

<%= javascript_include_tag "https://maps.google.com/maps/api/js?key=AIzaSyBAbVBfyj-wKN5_BQGC7LsP8hjV2GuH_WE" %>
<%= javascript_include_tag "https://cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/markerclusterer/src/markerclusterer_compiled.js" %>
<%= javascript_include_tag "https://cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js" %>

        <% content_for(:after_js) do %>
          <%= javascript_tag do %>
            $(document).ready(function(){
              $('.datepicker').datepicker({
              todayHighlight: true,
              datesDisabled: <%= raw @parking_spot.unavailable_dates %>,
              startDate: 'today',
              format: "dd/mm/yyyy"
              });
                var base_price = <%= @parking_spot.price %>;
                var parking_spot_price = <%= @parking_spot.price %>
                $('.datepicker').on('change', function(){
                  var start_at = Date.parse( $('#dp_start_at').val() )
                  var end_at = Date.parse( $('#dp_end_at').val() )
                  var elapsed_time_days = (end_at - start_at) / 86400000;
                  var total_price = base_price + (elapsed_time_days * parking_spot_price)
                  $('#total-price').html(total_price);
                });
            });

            var handler = Gmaps.build('Google');
            handler.buildMap({ internal: { id: 'map' } }, function() {
              markers = handler.addMarkers(
                [{
                  "lat": <%= @parking_spot.latitude %>,
                  "lng": <%= @parking_spot.longitude %>
                }]
              );
              handler.bounds.extendWith(markers);
              handler.fitMapToBounds();
              if (markers.length == 0) {
                handler.getMap().setZoom(2);
              } else if (markers.length == 1) {
                handler.getMap().setZoom(13);
              }
            });
      <% end %>
  <% end %>
</div>

